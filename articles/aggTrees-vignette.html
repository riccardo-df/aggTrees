<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Short Tutorial • aggTrees</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Short Tutorial">
<meta property="og:description" content="aggTrees">
<meta property="og:image" content="https://riccardo-df.github.io/aggTrees/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aggTrees</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/aggTrees-vignette.html">Get started</a>
</li>
<li>
  <a href="../articles/inference.html">Inference</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/riccardo-df/aggTrees" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Short Tutorial</h1>
            
      
      
      <div class="hidden name"><code>aggTrees-vignette.Rmd</code></div>

    </div>

    
    
<p>In this tutorial, we show how to use the <code>aggTrees</code>
package to discover heterogeneous subgroups in a
selection-on-observables setting.</p>
<div class="section level2">
<h2 id="methodology-overview">Methodology Overview<a class="anchor" aria-label="anchor" href="#methodology-overview"></a>
</h2>
<p>The approach consists of three steps:</p>
<ol style="list-style-type: decimal">
<li>Estimate the conditional average treatment effects (CATEs);</li>
<li>Approximate the CATEs by a decision tree;</li>
<li>Prune the tree.</li>
</ol>
<p>This way, we generate a sequence of groupings, one for each
granularity level.</p>
<p>The resulting sequence is nested in the sense that subgroups formed
at a given level of granularity are never broken at coarser levels. This
guarantees consistency of the results across the different granularity
levels, generally considered a basic requirement that every
classification system should satisfy. Moreover, each grouping features
an optimality property in that it ensures that the loss in explained
heterogeneity resulting from aggregation is minimized.</p>
<p>Given the sequence of groupings, we can estimate the group average
treatment effects (GATEs) as we like. The package supports two
estimators, based on differences in mean outcomes between treated and
control units (unbiased only in randomized experiments) and on sample
averages of doubly-robust scores (unbiased also in observational
studies).</p>
<p>The package also allows to get standard errors for the GATEs by
estimating via OLS appropriate linear models. Then, under an “honesty”
condition, we can use the estimated standard errors to conduct valid
inference about the GATEs as usual, e.g., by constructing conventional
confidence intervals.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div class="section level2">
<h2 id="code">Code<a class="anchor" aria-label="anchor" href="#code"></a>
</h2>
<p>For illustration purposes, let us generate some data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Generate data.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1986</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">k</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">k</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="va">k</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">mu0</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">mu1</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">mu0</span> <span class="op">+</span> <span class="va">D</span> <span class="op">*</span> <span class="op">(</span><span class="va">mu1</span> <span class="op">-</span> <span class="va">mu0</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="cates-estimation">CATEs Estimation<a class="anchor" aria-label="anchor" href="#cates-estimation"></a>
</h3>
<p>First, we need to estimate the CATEs. This can be achieved with any
estimator we like. Here we use the causal forest estimator. To achieve
valid inference about the GATEs, we split the sample into a training
sample and an honest sample of equal sizes. The CATEs are estimated
using only the training sample.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Sample split.</span></span>
<span><span class="va">splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_split.html">sample_split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span>, training_frac <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">training_idx</span> <span class="op">&lt;-</span> <span class="va">splits</span><span class="op">$</span><span class="va">training_idx</span></span>
<span><span class="va">honest_idx</span> <span class="op">&lt;-</span> <span class="va">splits</span><span class="op">$</span><span class="va">honest_idx</span></span>
<span></span>
<span><span class="va">Y_tr</span> <span class="op">&lt;-</span> <span class="va">Y</span><span class="op">[</span><span class="va">training_idx</span><span class="op">]</span></span>
<span><span class="va">D_tr</span> <span class="op">&lt;-</span> <span class="va">D</span><span class="op">[</span><span class="va">training_idx</span><span class="op">]</span></span>
<span><span class="va">X_tr</span> <span class="op">&lt;-</span> <span class="va">X</span><span class="op">[</span><span class="va">training_idx</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">Y_hon</span> <span class="op">&lt;-</span> <span class="va">Y</span><span class="op">[</span><span class="va">honest_idx</span><span class="op">]</span></span>
<span><span class="va">D_hon</span> <span class="op">&lt;-</span> <span class="va">D</span><span class="op">[</span><span class="va">honest_idx</span><span class="op">]</span></span>
<span><span class="va">X_hon</span> <span class="op">&lt;-</span> <span class="va">X</span><span class="op">[</span><span class="va">honest_idx</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">## Estimate the CATEs. Use only training sample.</span></span>
<span><span class="va">forest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/grf/man/causal_forest.html" class="external-link">causal_forest</a></span><span class="op">(</span><span class="va">X_tr</span>, <span class="va">Y_tr</span>, <span class="va">D_tr</span><span class="op">)</span> </span>
<span><span class="va">cates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">forest</span>, <span class="va">X</span><span class="op">)</span><span class="op">$</span><span class="va">predictions</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="constructing-the-sequence-of-groupings">Constructing the Sequence of Groupings<a class="anchor" aria-label="anchor" href="#constructing-the-sequence-of-groupings"></a>
</h3>
<p>Now we use the <code>build_aggtree</code> function to construct the
sequence of groupings. This function approximates the estimated CATEs by
a decision tree using only the training sample and computes node
predictions (i.e., the GATEs) using only the honest sample.
<code>build_aggtree</code> allows the user to choose between two GATE
estimators:</p>
<ol style="list-style-type: decimal">
<li>If we set <code>method = "raw"</code>, the GATEs are estimated by
taking the differences between the mean outcomes of treated and control
units in each node. This is an unbiased estimator (only) in randomized
experiments;</li>
<li>If we set <code>method = "aipw"</code>, the GATEs are estimated by
averaging doubly-robust scores in each node. This is an unbiased
estimator also in observational studies under particular conditions on
the construction of the scores.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
</li>
</ol>
<p>The doubly-robust scores are estimated internally using 5-fold
cross-fitting and only observations from the honest sample. Notice the
use of the <code>is_honest</code> argument, a logical vector denoting
which observations we allocated to the honest sample. This way,
<code>build_aggtree</code> knows which observations must be used to
construct the tree and compute node predictions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Construct the sequence. Use doubly-robust scores.</span></span>
<span><span class="va">groupings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_aggtree.html">build_aggtree</a></span><span class="op">(</span><span class="va">Y</span>, <span class="va">D</span>, <span class="va">X</span>, method <span class="op">=</span> <span class="st">"aipw"</span>, </span>
<span>                           cates <span class="op">=</span> <span class="va">cates</span>, is_honest <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">honest_idx</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Print.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">groupings</span><span class="op">)</span></span>
<span><span class="co">#&gt; Honest estimates: TRUE </span></span>
<span><span class="co">#&gt; n= 500 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; node), split, n, deviance, yval</span></span>
<span><span class="co">#&gt;       * denotes terminal node</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1) root 500 321.018500 -0.11661130  </span></span>
<span><span class="co">#&gt;   2) x2&lt; -0.1879849 221  12.823010 -1.30713100  </span></span>
<span><span class="co">#&gt;     4) x2&lt; -0.383392 190   4.463077 -1.45418600 *</span></span>
<span><span class="co">#&gt;     5) x2&gt;=-0.383392 31   1.128113 -0.24711230 *</span></span>
<span><span class="co">#&gt;   3) x2&gt;=-0.1879849 279  68.150780  0.65742310  </span></span>
<span><span class="co">#&gt;     6) x2&lt; 0.6613496 160   4.756562  0.05290272 *</span></span>
<span><span class="co">#&gt;     7) x2&gt;=0.6613496 119   3.632301  1.45114500 *</span></span>
<span></span>
<span><span class="co">## Plot.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">groupings</span><span class="op">)</span> <span class="co"># Try also setting 'sequence = TRUE'.</span></span></code></pre></div>
<p><img src="aggTrees-vignette_files/figure-html/construct-sequence-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="further-analysis">Further Analysis<a class="anchor" aria-label="anchor" href="#further-analysis"></a>
</h3>
<p>Now that we have a whole sequence of optimal groupings, we can pick
the grouping associated with our preferred granularity level and call
the <code>inference_aggtree</code> function. This function does the
following:</p>
<ol style="list-style-type: decimal">
<li>It gets standard errors for the GATEs by estimating via OLS
appropriate linear models using the honest sample. The choice of the
linear model depends on the <code>method</code> we used when we called
<code>build_aggtree</code>;<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</li>
<li>It tests the null hypotheses that the differences in the GATEs
across all pairs of groups equal zero. Here, we account for multiple
hypotheses testing by adjusting the <span class="math inline">\(p\)</span>-values using Holm’s procedure;</li>
<li>It computes the average characteristics of the units in each
group.</li>
</ol>
<p>To report the results, we can print nice LATEX tables.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Inference with 4 groups.</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_aggtree.html">inference_aggtree</a></span><span class="op">(</span><span class="va">groupings</span>, n_groups <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## LATEX.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span>, table <span class="op">=</span> <span class="st">"diff"</span><span class="op">)</span></span>
<span><span class="co">#&gt; \begingroup</span></span>
<span><span class="co">#&gt;   \setlength{\tabcolsep}{8pt}</span></span>
<span><span class="co">#&gt;   \renewcommand{\arraystretch}{1.2}</span></span>
<span><span class="co">#&gt;   \begin{table}[b!]</span></span>
<span><span class="co">#&gt;     \centering</span></span>
<span><span class="co">#&gt;     \begin{adjustbox}{width = 1\textwidth}</span></span>
<span><span class="co">#&gt;     \begin{tabular}{@{\extracolsep{5pt}}l c c c c}</span></span>
<span><span class="co">#&gt;       \\[-1.8ex]\hline</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex] </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       &amp; \textit{Leaf 1} &amp; \textit{Leaf 2} &amp; \textit{Leaf 3} &amp; \textit{Leaf 4} \\</span></span>
<span><span class="co">#&gt;       \addlinespace[2pt]</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex] </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \multirow{3}{*}{GATEs} &amp; -1.454 &amp; -0.247 &amp;  0.053 &amp;  1.451 \\</span></span>
<span><span class="co">#&gt;       &amp; [-1.781, -1.127] &amp; [-1.013,  0.519] &amp; [-0.249,  0.355] &amp; [ 1.086,  1.816] \\</span></span>
<span><span class="co">#&gt;       &amp; \{NA, NA\} &amp; \{NA, NA\} &amp; \{NA, NA\} &amp; \{NA, NA\} \\ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \addlinespace[2pt]</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex] </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \textit{Leaf 1} &amp; NA &amp; NA &amp; NA &amp; NA \\</span></span>
<span><span class="co">#&gt;             &amp; (NA) &amp; (NA) &amp; (NA) &amp; (NA) \\ </span></span>
<span><span class="co">#&gt;       \textit{Leaf 2} &amp; 1.21 &amp;   NA &amp;   NA &amp; NA \\</span></span>
<span><span class="co">#&gt;             &amp; (0.010) &amp; (   NA) &amp; (   NA) &amp; (NA) \\ </span></span>
<span><span class="co">#&gt;       \textit{Leaf 3} &amp; 1.51 &amp; 0.30 &amp;   NA &amp; NA \\</span></span>
<span><span class="co">#&gt;             &amp; (0.000) &amp; (0.476) &amp; (   NA) &amp; (NA) \\ </span></span>
<span><span class="co">#&gt;       \textit{Leaf 4} &amp; 2.91 &amp; 1.70 &amp; 1.40 &amp; NA \\</span></span>
<span><span class="co">#&gt;             &amp; (0.000) &amp; (0.000) &amp; (0.000) &amp; (NA) \\ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \addlinespace[3pt]</span></span>
<span><span class="co">#&gt;       \\[-1.8ex]\hline</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex]</span></span>
<span><span class="co">#&gt;     \end{tabular}</span></span>
<span><span class="co">#&gt;     \end{adjustbox}</span></span>
<span><span class="co">#&gt;     \caption{Point estimates and $95\%$ confidence intervals for the GATEs based on asymptotic normality (in square brackets) and on the percentiles of the bootstrap distribution (in curly braces). Leaves are sorted in increasing order of the GATEs. Additionally, the differences in the GATEs across all pairs of leaves are displayed. $p$-values to test the null hypothesis that a single difference is zero are adjusted using Holm's procedure and reported in parenthesis under each point estimate.}</span></span>
<span><span class="co">#&gt;     \label{table:differences.gates}</span></span>
<span><span class="co">#&gt;     \end{table}</span></span>
<span><span class="co">#&gt; \endgroup</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span>, table <span class="op">=</span> <span class="st">"avg_char"</span><span class="op">)</span></span>
<span><span class="co">#&gt; \begingroup</span></span>
<span><span class="co">#&gt;   \setlength{\tabcolsep}{8pt}</span></span>
<span><span class="co">#&gt;   \renewcommand{\arraystretch}{1.1}</span></span>
<span><span class="co">#&gt;   \begin{table}[b!]</span></span>
<span><span class="co">#&gt;     \centering</span></span>
<span><span class="co">#&gt;     \begin{adjustbox}{width = 1\textwidth}</span></span>
<span><span class="co">#&gt;     \begin{tabular}{@{\extracolsep{5pt}}l c c c c c c c c }</span></span>
<span><span class="co">#&gt;       \\[-1.8ex]\hline</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex]</span></span>
<span><span class="co">#&gt;       &amp; \multicolumn{2}{c}{\textit{Leaf 1}} &amp; \multicolumn{2}{c}{\textit{Leaf 2}} &amp; \multicolumn{2}{c}{\textit{Leaf 3}} &amp; \multicolumn{2}{c}{\textit{Leaf 4}} \\\cmidrule{2-3} \cmidrule{4-5} \cmidrule{6-7} \cmidrule{8-9} </span></span>
<span><span class="co">#&gt;       &amp; Mean &amp; (S.E.) &amp; Mean &amp; (S.E.) &amp; Mean &amp; (S.E.) &amp; Mean &amp; (S.E.) \\</span></span>
<span><span class="co">#&gt;       \addlinespace[2pt]</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex] </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \texttt{x1} &amp; -0.018 &amp; (0.073) &amp; -0.041 &amp; (0.188) &amp;  0.001 &amp; (0.078) &amp; -0.029 &amp; (0.082) \\ </span></span>
<span><span class="co">#&gt;       \texttt{x2} &amp; -1.056 &amp; (0.044) &amp; -0.299 &amp; (0.012) &amp;  0.207 &amp; (0.018) &amp;  1.286 &amp; (0.046) \\ </span></span>
<span><span class="co">#&gt;       \texttt{x3} &amp;  0.043 &amp; (0.075) &amp; -0.136 &amp; (0.198) &amp; -0.156 &amp; (0.079) &amp;  0.050 &amp; (0.085) \\ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       \addlinespace[3pt]</span></span>
<span><span class="co">#&gt;       \\[-1.8ex]\hline</span></span>
<span><span class="co">#&gt;       \hline \\[-1.8ex]</span></span>
<span><span class="co">#&gt;     \end{tabular}</span></span>
<span><span class="co">#&gt;     \end{adjustbox}</span></span>
<span><span class="co">#&gt;     \caption{Average characteristics of units in each leaf, obtained by regressing each covariate on a set of dummies denoting leaf membership using only the honest sample. Standard errors are estimated via the Eicker-Huber-White estimator. Leaves are sorted in increasing order of the GATEs.}</span></span>
<span><span class="co">#&gt;     \label{table:average.characteristics.leaves}</span></span>
<span><span class="co">#&gt;     \end{table}</span></span>
<span><span class="co">#&gt; \endgroup</span></span></code></pre></div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>Check the <a href="https://riccardo-df.github.io/aggTrees/articles/inference.html">inference
vignette</a> for more details.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>See footnote 1.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>See footnote 1.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Riccardo Di Francesco.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
